{% extends '@Frontend/layout.html.twig' %}

{% block title %} {{ "Contact Us | Nashville Shopping Center" |trans({}, 'general') }} {% endblock %}

{% block metatags %}
    <meta name="keywords"
          content="{{- render(controller('BackendBundle:Settings:getSettings', { 'property' : 'websiteBrand' })) -}},
    {{ 'Mall' | trans({}, 'homepage') }},
    {{ 'Businesses' | trans({}, 'homepage') }},
    {{ 'Deals' | trans({}, 'homepage') }},
    {{ 'Buying' | trans({}, 'homepage') }},
    "/>
    <meta name="description" content="
    {#- retrieving settings values -#}
    {#-{{- render(controller('BackendBundle:Settings:getSettings', { 'property' : 'textAbout' })) -}}-#}
    {{- "At Plaza Mariachi you'll hear Hispanic music, see Latin relics, discover old and new Mexico in food, fashion and much more. Come explore Plaza Mariachi today!" | trans({}, 'general') -}}
    "/>
{% endblock %}

{% set current_static = "contact" %}

{% block navbar %}
    {% embed '@Frontend/navbar.html.twig' %}
        {% block navbar_class '' %}
    {% endembed %}
{% endblock %}

{% block page_content %}

    {# slider #}
    <section class="inner-content section-spaces-line">
        <div class="container">
            <div class="row m-b">
                <div class="col-lg-12 text-center m-b-xl">
                    <div class="section-line amber-line"></div>
                    <h1>{{ 'Contact Us' | trans({}, 'contact') }}</h1>
                </div>

                <div class="col-sm-6 contact-left m-t-sm">
                    <address>
                        <h2 class="m-t-none m-b-sm">
                            <strong>
                                <span class="green">
                                    {{ render(controller('BackendBundle:Settings:getSettings', { 'property' : 'websiteName' })) | upper }}
                                    <i><sub>{{ render(controller('BackendBundle:Settings:getSettings', { 'property' : 'websiteLastname' })) }}</sub></i>
                                </span>
                            </strong>
                        </h2>
                        <br/><br/>
                        {{ render(controller('BackendBundle:Settings:getSettings', { 'property' : 'websiteAddress' })) }}
                        <br/><br/>
                        {{ 'Phone' | trans({}, 'homepage') }}:
                        <a title="{{ 'Phone' | trans({}, 'homepage') }}"
                           class="green-link"
                           href="tel:+1{{ render(controller('BackendBundle:Settings:getSettings', { 'property' : 'websitePhone' })) | unformat_phone }}">{{ render(controller('BackendBundle:Settings:getSettings', { 'property' : 'websitePhone' })) }}</a>
                        <br/>
                        {{ 'Fax' | trans({}, 'homepage') }}:
                        <a title="{{ 'Fax' | trans({}, 'homepage') }}"
                           class="green-link"
                           href="tel:+1{{ render(controller('BackendBundle:Settings:getSettings', { 'property' : 'websiteFax' })) | unformat_phone }}">{{ render(controller('BackendBundle:Settings:getSettings', { 'property' : 'websiteFax' })) }}</a><br/>
                        E-mail:
                        <a class="green-link"
                           title="{{ render(controller('BackendBundle:Settings:getSettings', { 'property' : 'websiteEmail' })) }}"
                           href="mailto:{{ render(controller('BackendBundle:Settings:getSettings', { 'property' : 'websiteEmail' })) }}">
                            {{ render(controller('BackendBundle:Settings:getSettings', { 'property' : 'websiteEmail' })) }}
                        </a>
                    </address>
                </div>

                <div class="col-sm-6 contact-right">
                    <h2 class="m-t-none m-b">{{ 'Send us a message' | trans({}, 'contact') }}</h2>
                    <form role="form" action="" name="frontend-send-contact-form">
                        <div class="form-group">
                            <input name="full-name" class="form-control"
                                   placeholder="{{ 'Full name (required)' | trans({}, 'contact') }}" type="text"
                                   data-msg="Please fill this field"
                                   required>
                        </div>
                        <div class="form-group">
                            <input name="email" class="form-control"
                                   data-msg="Please fill this field"
                                   placeholder="{{ 'Email (required)' | trans({}, 'contact') }}" type="email" required>
                        </div>
                        <div class="form-group">
                            <input name="subject"
                                   data-msg="Please fill this field"
                                   class="form-control" placeholder="{{ 'Subject (required)' | trans({}, 'contact') }}"
                                   type="text" required>
                        </div>
                        <div class="form-group">
                            <textarea name="message" class="form-control"
                                      data-msg="Please fill this field"
                                      placeholder="{{ 'Type message here (required) ...' | trans({}, 'contact') }}"
                                      required></textarea>
                        </div>
                        <div class="form-group">
                            <div class="g-recaptcha" data-sitekey="6LeghiUUAAAAAKQeUM2KoaJVuV8BbOSKQTTBc4Yg"></div>
                        </div>
                        <div>
                            <span id="user-messages" class="hidden block m-b"></span>
                            <button class="btn btn-success m-t-n-xs ladda-button" data-style="zoom-in" type="submit">
                                {{ 'Send' | trans({}, 'contact') }}
                            </button>
                        </div>
                    </form>
                </div>
            </div>


        </div>
    </section>

    <section class="section-spaces no-padding m-b-none">
        <div class="no-pointer-event">
            <p data-coordinates="40.748384,-73.9854792">
                {#Plaza Mariachi Map Location#}
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3224.365351084404!2d-86.73197668536223!3d36.08458098010219!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x88646f9ceddcb1e3%3A0x685c1cee10bc93a9!2s3955+Nolensville+Pike%2C+Nashville%2C+TN+37211!5e0!3m2!1ses!2s!4v1470849578887"
                        height="400" frameborder="0" style="border:0; width: 100%; background-color: #cccccc;"
                        allowfullscreen></iframe>
            </p>
        </div>
    </section>


{% endblock %}

{% block custom_js %}
    <script src='https://www.google.com/recaptcha/api.js'></script>
{% endblock %}

{% block inline_js %}
    {{ parent() }}

    <script type="text/javascript">
        $(document).ready(function () {
            var formTag = $('form[name="frontend-send-contact-form"]');

            formTag.submit(function (e) {

                e.preventDefault();
                var $form = $(this);

                // check if the input is valid
                if (!$form.valid()) return false;

                var formdata = new FormData(formTag[0]);

                $.ajax({
                    type: "POST",
                    url: Routing.generate("send_contact_message"),
                    processData: false,
                    contentType: false,
                    cache: false,
                    // contentType: 'application/x-www-form-urlencoded',
                    data: formdata
                }).done(function (html) {
                    var parsedData = JSON.parse(html);

                    // message
                    if (typeof parsedData['errorMessage'] !== 'undefined') {
                        $('#user-messages').addClass('text-danger').show();
                        $('#user-messages').html(parsedData['errorMessage']);

                        setTimeout(function () {
                            $('#user-messages').html("");
                            $('#user-messages').removeClass('text-danger').hide();
                        }, 3000);
                    } else {
                        // reset form
                        formTag[0].reset();

                        $('#user-messages').addClass('text-navy').show();
                        $('#user-messages').html(parsedData['message']);

                        setTimeout(function () {
                            $('#user-messages').html("");
                            $('#user-messages').removeClass('text-navy').hide();
                        }, 3000);
                    }
                });
            });

        });
    </script>
{% endblock %}