{% extends '@Frontend/layout.html.twig' %}

{% block title %} {{ "Entertainment Calendar" |trans({}, 'calendar') }} {% endblock %}

{% block metatags %}
    <meta name="keywords"
          content="{{- render(controller('BackendBundle:Settings:getSettings', { 'property' : 'websiteBrand' })) -}},
    {{ 'Mall' | trans({}, 'homepage') }},
    {{ 'Businesses' | trans({}, 'homepage') }},
    {{ 'Deals' | trans({}, 'homepage') }},
    {{ 'Buying' | trans({}, 'homepage') }},
    {{ 'Events' | trans({}, 'homepage') }},
    {{ 'Calendar' | trans({}, 'homepage') }},
    "/>
    <meta name="description" content="
    {#- retrieving settings values -#}
    {#-{{- render(controller('BackendBundle:Settings:getSettings', { 'property' : 'textAbout' })) -}}-#}
    {{- "At Plaza Mariachi you'll hear Hispanic music, see Latin relics, discover old and new Mexico in food, fashion and much more. Come explore Plaza Mariachi today!" | trans({}, 'general') -}}
    "/>
{% endblock %}

{% block navbar %}
    {% embed '@Frontend/navbar.html.twig' %}
        {% block navbar_class '' %}
    {% endembed %}
{% endblock %}

{% block page_content %}

    {# slider #}
    <section class="inner-content section-spaces-line">
        <div class="container">
            <div class="row m-b">
                <div class="col-lg-12 text-center">
                    <div class="section-line amber-line"></div>
                    <h1>{{ 'Plaza Mariachi Entertainment Calendar' | trans({}, 'calendar') }}</h1>
                </div>
            </div>

            <p class="text-muted-strong text-justify">
                {% trans with {'%link%' : 'https://plazamariachi.com/nashville-ppv'} from 'calendar' %}
                    Come to the Plaza Mariachi to enjoy great food and beverages, art, shopping and live entertainment. Below you will find a list of the acts that are scheduled to perform at Plaza Mariachi to help you plan your visit. You can check our <a href="%link%">special events here</a>. Please note that dates and times are subject to change.
                {% endtrans %}
            </p>

            <div class="row calendar--buttons m-b-md m-t-md text-center">
                <div class="pull-right calendar--selector m-r-md">
                    <span class="hidden-xs">{{ 'VIEW AS' | trans({}, 'calendar') }}</span>
                    <a href="{{ path('calendar') }}"
                       class="btn btn-default active">{{ 'TIMELINE' | trans({}, 'calendar' ) }}</a>
                    <a href="{{ path('calendar', {'view' : 'calendar'}) }}"
                       class="btn btn-default">{{ 'CALENDAR' | trans({}, 'calendar' ) }}</a>
                </div>
            </div>

            <div id="vertical-timeline" class="vertical-container dark-timeline center-orientation">
                {% for event in events %}
                    <div class="vertical-timeline-block">
                        <div class="vertical-timeline-icon navy-bg {{ 'color-bg-' ~ event.colorId | default('') }}">
                            <i class="fa fa-calendar"></i>
                        </div>

                        <div class="vertical-timeline-content">
                            <h2>{{ event.summary }}</h2>
                            {% if event.description is defined %}
                                <p>
                                    {{ event.description }}
                                </p>
                            {% endif %}
                            {# <p class="col-sm-4">
                                <i class="fa fa-clock-o"></i> {{ event.start.dateTime | date('h:i A')  }}
                            </p> #}
                            {% if event.location is defined %}
                                <p class="col-sm-8">
                                    <i class="fa fa-map-marker"></i> {{ event.location }}
                                </p>
                            {% endif %}
                            {# <a href="timeline_2.html#" class="btn btn-sm btn-primary"> More info</a> #}
                            <span class="vertical-date">
                                <div></div>
                                <small data-date="{{ event.start.dateTime | date }}" data-end="{{ event.end.dateTime | date }}"></small><br/>
                                    {# <small><i class="fa fa-clock-o"></i> {{ event.start.dateTime | date('h:i A')  }}</small> #}

                                {% if event.url %}
                                    <a href="{{ event.url }}" class="btn btn-amber m-t-md">
                                        {{ 'BUY TICKETS' | trans({}, 'calendar') }}
                                    </a>
                                {% endif %}
                            </span>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>
{% endblock %}

{% block custom_js %}
    {{ parent() }}

    <script src="{{ asset('bundles/frontend/js/moment.min.js') }}"></script>
    <script src="{{ asset('bundles/frontend/js/moment.es.js') }}"></script>
{% endblock %}

{% block inline_js %}
    <script type="text/javascript">
        $(document).ready(function () {
            var now = moment();

            $('.vertical-date small:first-of-type').each(function () {
                var str = $(this).data('date');
                var date = moment(str);
                str = $(this).data('end');
                var end = moment(str);

                $(this).text(date.locale('{{ app.request.get('_locale') }}').from(now));
                $(this).prev().html(
                    date.format('MM/DD/YYYY h:mm A') + " - " + end.format('h:mm A')
                )
            });
        });
    </script>
{% endblock %}